{"version":3,"sources":["components/FilterForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["FilterForm","props","value","onChange","Person","person","delPerson","name","number","onClick","Persons","personsToShow","map","key","id","baseURL","axios","get","then","response","data","newObject","post","delete","put","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","Searched","setSearched","showAll","setShowAll","errorMessage","setErrorMessage","errorType","setErrorType","useEffect","personService","initialPersons","Notification","message","console","log","className","updatePersons","personsNow","filter","toLowerCase","includes","event","target","onSubmit","preventDefault","personObject","some","obj","window","confirm","find","n","catch","error","setTimeout","concat","type","p","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6ce8ab1c.chunk.js","sourcesContent":["import React from 'react'\n\nconst FilterForm = (props) => {\n  return (\n    <p>filter shown with: <input\n      value = {props.value}\n      onChange = {props.onChange}\n    /></p>\n  )\n}\n\nexport default FilterForm\n","import React from 'react'\n\nconst Person = ( {person, delPerson} ) => {\n  return(\n    <p>\n      {person.name} {person.number} \n      <button onClick = {delPerson}>\n            Delete\n      </button> \n    </p>\n  )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\n\nconst Persons = ( {personsToShow, delPerson} ) => {\n  return (\n    <>    \n      {personsToShow.map(person =>\n        <Person \n          key = {person.name} \n          person = {person} \n          delPerson = {() => delPerson(person.id)}\n        />\n      )}\n    </>\n  )\n}\n\nexport default Persons","import axios from 'axios'\n\n// heroku paikallinen viittaus\nconst baseURL = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseURL)\n\n  return (\n    request.then(response => response.data)\n  )\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseURL, newObject)\n\n  return (\n    request.then(response => response.data)\n  )\n}\n\nconst remove = (id) => {\n    \n  return (\n    axios.delete(`${baseURL}/${id}`)\n  )\n}\n\nconst update = (id, newObject) => {  \n  return axios.put(`${baseURL}/${id}`, newObject)\n}\n\nexport default {getAll, create, remove, update}","import React, { useState, useEffect } from 'react'\nimport FilterForm from './components/FilterForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [Searched, setSearched] = useState('')\n  const [showAll, setShowAll] = useState(true)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [errorType, setErrorType] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n\n  }, [])\n\n  const Notification = ({ message }) => {\n\n    if (message === null) {\n      return null\n    }\n    console.log(errorType)\n\n    return (\n      <div className={errorType}>\n        {message}\n      </div>\n    )\n  }\n\n  const updatePersons = () => {\n    personService\n      .getAll()\n      .then(personsNow => {\n        setPersons(personsNow)\n      })\n\n    setNewName('')\n    setNewNumber('')\n\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(obj => obj.name === newName)) {\n\n      const result = window.confirm(`${newName} is already added in phonebook, replace the old number with a new one?`)\n\n      if (result) {\n        const id = persons.find(n => n.name === newName).id\n        \n        console.log('tarttis päivittää', id)\n\n\n        personService\n          .update(id, personObject)\n          .then(response => {\n            console.log('success')\n            setErrorType('notification')\n            setErrorMessage(\n              `Updated ${newName}`)\n          })\n          .catch(error => {\n            console.log('such fail')\n            setErrorType('error')\n            setErrorMessage(\n              `${newName} has already been deleted from database`)\n          })\n        \n        updatePersons()\n\n        setTimeout(() => {\n          setErrorMessage(null)\n          setErrorType(null)\n        }, 5000)\n      }\n\n      return\n    }\n\n    personService\n      .create(personObject)\n      .then(response => {\n        setPersons(persons.concat(personObject))\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setErrorType('error')\n        setErrorMessage(\n          'Name must be at least 3 and number at least 8 characters'\n        )\n      })\n\n    setErrorType('notification')\n    setErrorMessage(\n      `Added ${newName}`,\n    )\n\n    setTimeout(() => {\n      setErrorMessage(null)\n      setErrorType(null)\n    }, 5000)\n\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event => {\n    setNewNumber(event.target.value)\n  })\n\n  const handleSearched = (event => {\n\n    if (Searched !== '') {\n      setShowAll(false)\n    }\n\n    setSearched(event.target.value)\n\n  })\n\n  const delPerson = id => {\n    console.log(`delete ${id}`)\n\n    const name = persons.find(p => p.id === id).name\n\n    const result = window.confirm(`Delete ${name}?`)\n\n    if (result) {\n      personService.remove(id)\n\n\n      // ja päivitetään persons\n      updatePersons()\n\n    } else {\n      console.log(`Ok, will not delete ${name}`)\n    }\n  }\n\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter(person =>\n      person.name.toLowerCase().includes(Searched.toLowerCase())\n    )\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={errorMessage}></Notification>\n      <div><FilterForm value={Searched} onChange={handleSearched} /></div>\n\n      <h2>Add a new </h2>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input\n            value={newName}\n            onChange={handleNewName}\n          />\n        </div>\n        <div>\n          number: <input\n            value={newNumber}\n            onChange={handleNewNumber}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n\n      <h2>Numbers</h2>\n\n      <div>\n        <Persons\n          personsToShow={personsToShow}\n          delPerson={delPerson} />\n      </div>\n    </div>\n  )\n\n}\n\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}